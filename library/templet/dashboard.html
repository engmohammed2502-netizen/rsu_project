{% extends 'library/base.html' %}
{% block content %}
<div class="row g-4 mb-4">
    <div class="col-md-3">
        <div class="main-card p-3 text-center border-bottom border-primary border-4">
            <h2 class="fw-bold text-primary">{{ stats.active_now }}</h2>
            <p class="text-muted mb-0">نشط الآن</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="main-card p-3 text-center border-bottom border-success border-4">
            <h2 class="fw-bold text-success">{{ stats.students_count }}</h2>
            <p class="text-muted mb-0">طالب مسجل</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="main-card p-3 text-center border-bottom border-info border-4">
            <h2 class="fw-bold text-info">{{ stats.professors_count }}</h2>
            <p class="text-muted mb-0">أستاذ</p>
        </div>
    </div>
    <div class="col-md-3">
        <div class="main-card p-3 text-center border-bottom border-warning border-4">
            <h2 class="fw-bold text-warning">{{ stats.files_count }}</h2>
            <p class="text-muted mb-0">إجمالي الملفات</p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="main-card p-4">
            <h5><i class="fas fa-history me-2"></i> آخر العمليات في الموقع</h5>
            <table class="table table-hover mt-3">
                <thead class="table-light">
                    <tr>
                        <th>المستخدم</th>
                        <th>العملية</th>
                        <th>التوقيت</th>
                        <th>IP</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>{{ log.user.full_name }}</td>
                        <td>{{ log.action }}</td>
                        <td class="small">{{ log.timestamp|date:"H:i - d/m" }}</td>
                        <td class="text-muted small">{{ log.ip_address }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-4">
        <div class="main-card p-4">
            <h5>إدارة سريعة</h5>
            <div class="d-grid gap-2 mt-4">
                <a href="/admin/library/user/add/" class="btn btn-outline-primary">إضافة طالب/دكتور</a>
                <a href="/admin/library/course/add/" class="btn btn-outline-success">إضافة مادة جديدة</a>
                <button class="btn btn-dark" onclick="window.print()">طباعة تقرير الشهر</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
